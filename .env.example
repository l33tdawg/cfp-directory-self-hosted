# =============================================================================
# CFP Directory Self-Hosted - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------
DATABASE_URL="postgresql://cfp:change-me@localhost:5432/cfp"

# -----------------------------------------------------------------------------
# AUTHENTICATION (NextAuth.js)
# -----------------------------------------------------------------------------
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-here-generate-with-openssl-rand-base64-32"

# -----------------------------------------------------------------------------
# EMAIL (Optional)
# -----------------------------------------------------------------------------
SMTP_HOST=""
SMTP_PORT="587"
SMTP_USER=""
SMTP_PASS=""
SMTP_SECURE="false"
EMAIL_FROM="noreply@example.com"

# -----------------------------------------------------------------------------
# FILE STORAGE
# -----------------------------------------------------------------------------
UPLOAD_DIR="./uploads"
MAX_FILE_SIZE_MB="100"
ALLOWED_FILE_TYPES="pdf,pptx,ppt,odp,key,doc,docx,mp4,webm,jpg,jpeg,png,gif"

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------
APP_NAME="CFP System"
APP_URL="http://localhost:3000"

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
# SETUP_TOKEN: Required for initial admin setup on fresh installations
# Generate with: openssl rand -hex 32
# CRITICAL: Set this before deploying to prevent unauthorized admin creation
SETUP_TOKEN=""

# ALLOW_PUBLIC_SIGNUP: Allow anyone to register (default: false)
# When false, only admins can invite users
# Set to "true" only if you want open public registration
ALLOW_PUBLIC_SIGNUP="false"

# TRUST_PROXY_HEADERS: Trust proxy headers for client IP (default: false)
# Set to "true" ONLY if deployed behind a reverse proxy that:
# - Strips client-provided X-Forwarded-For, CF-Connecting-IP headers
# - Sets correct client IP in these headers
# WARNING: If enabled incorrectly, attackers can bypass rate limiting
TRUST_PROXY_HEADERS="false"

# TRUSTED_PROXY_COUNT: Number of trusted proxies in the chain (default: 1)
# Only used when TRUST_PROXY_HEADERS="true"
# Example: CDN -> Load Balancer -> App = 2 proxies
TRUSTED_PROXY_COUNT="1"

# CRON_SECRET: Secret for authenticating scheduled job endpoints
# Also used for detailed health check access
# Generate with: openssl rand -hex 32
CRON_SECRET=""

# ENCRYPT_PII_AT_REST: Encrypt personally identifiable information (default: true in production)
# Set to "false" only in development for easier debugging
ENCRYPT_PII_AT_REST="true"

# -----------------------------------------------------------------------------
# FEDERATION (Optional - requires license from cfp.directory)
# -----------------------------------------------------------------------------
FEDERATION_LICENSE_KEY=""
CFP_DIRECTORY_API_URL="https://cfp.directory/api/federation/v1"

# -----------------------------------------------------------------------------
# DEVELOPMENT
# -----------------------------------------------------------------------------
NODE_ENV="development"
